---
category:
- Geek
creator: admin
date: 2006-08-18T03:14:37
layout: layout.njk
permalink: /2006/08/17/sed-perl-rename/
tags:
- Linux
- Perl
title: sed, perl, rename
type: post
wp_id: "9"
---
<p style="border: 2px dashed #cccccc; padding: 2px">This is a post from a previous system.  Information, links and images may not be vaild.</p>
Yesterday I spent 10, maybe 20 minutes poking around the internet looking for some sort, any sort, of batch renaming utility for linux.  I knew there had to be one somewhere, I mean, come on.  I eventually found a batch file that ran into some sed that wasn't really what I wanted, but I figured I could pick apart the sed and figure it out.

Bad idea, I ran it without really testing it, and it ate all of my files, every single one. Luckily I had backups, and I started pulling them off the server.  Today I wrote a Perl script to do the job, and finished off with one more Google search to see if I couldn't find something simpler.

I guess my problem was searching for "<strong>batch</strong> rename" because there were no good results, but I found the nix command <em>rename</em> this time and check out the man page.  Wow, stupid me, I re-invented the wheel today,and didn't do it nearly as well.

Whatever, I can live with that, and it got me writing some Perl, which I haven't done in a long time.  So here for your consumption is my Perl script that <u>will</u> let you blow your foot off, but can get the job done for substitution.
<pre style="border: 1px solid #bbbbbb; padding: 2px; overflow: auto; font-size: 10px; background-color: #eeeeee; height: 300px"><font color="#444444">#!/usr/bin/perl  </font><strong>if</strong><font color="#4444ff"><strong>(</strong></font><font color="#2040a0">$#</font>ARGV < 2<font color="#4444ff"><strong>)</strong></font> <font color="#4444ff"><strong>{</strong></font>   <font color="#a52a2a"><strong>print</strong></font> <font color="#008000">"Directory: "</font>;   <font color="#2040a0">$directory</font> = <>;   <font color="#a52a2a"><strong>chomp</strong></font><font color="#4444ff"><strong>(</strong></font><font color="#2040a0">$directory</font><font color="#4444ff"><strong>)</strong></font>;   <font color="#a52a2a"><strong>print</strong></font> <font color="#008000">"Replace: "</font>;   <font color="#2040a0">$find</font> = <>;   <font color="#a52a2a"><strong>chomp</strong></font><font color="#4444ff"><strong>(</strong></font><font color="#2040a0">$find</font><font color="#4444ff"><strong>)</strong></font>;   <font color="#a52a2a"><strong>print</strong></font> <font color="#008000">"With: "</font>;   <font color="#2040a0">$with</font> = <>;   <font color="#a52a2a"><strong>chomp</strong></font><font color="#4444ff"><strong>(</strong></font><font color="#2040a0">$with</font><font color="#4444ff"><strong>)</strong></font>; <font color="#4444ff"><strong>}</strong></font> <strong>else</strong> <font color="#4444ff"><strong>{</strong></font>   <font color="#2040a0">$directory</font> = <font color="#2040a0">$ARGV</font><font color="#4444ff"><strong>[</strong></font>0<font color="#4444ff"><strong>]</strong></font>;   <font color="#2040a0">$find</font> = <font color="#2040a0">$ARGV</font><font color="#4444ff"><strong>[</strong></font>1<font color="#4444ff"><strong>]</strong></font>;   <font color="#2040a0">$with</font> = <font color="#2040a0">$ARGV</font><font color="#4444ff"><strong>[</strong></font>2<font color="#4444ff"><strong>]</strong></font>; <font color="#4444ff"><strong>}</strong></font>  <font color="#a52a2a"><strong>opendir</strong></font><font color="#4444ff"><strong>(</strong></font>DIR, <font color="#2040a0">$directory</font><font color="#4444ff"><strong>)</strong></font> || <strong>die</strong> <font color="#008000">"can't opendir <font color="#2040a0">$directory</font>: <font color="#2040a0">$!</font>"</font>; <font color="#2040a0">@dots</font> = <font color="#a52a2a"><strong>readdir</strong></font><font color="#4444ff"><strong>(</strong></font>DIR<font color="#4444ff"><strong>)</strong></font>; <font color="#a52a2a"><strong>closedir</strong></font> DIR;  <strong>foreach</strong><font color="#4444ff"><strong>(</strong></font><font color="#2040a0">@dots</font><font color="#4444ff"><strong>)</strong></font> <font color="#4444ff"><strong>{</strong></font>   <font color="#2040a0">$copy</font> = <font color="#2040a0">$_</font>;   <strong>if</strong><font color="#4444ff"><strong>(</strong></font> <font color="#2040a0">$_</font> =~<font color="#b000d0"> s/$find/$with/</font> <font color="#4444ff"><strong>)</strong></font>   <font color="#4444ff"><strong>{</strong></font>     <font color="#a52a2a"><strong>system</strong></font><font color="#4444ff"><strong>(</strong></font><font color="#008000">"mv <font color="#2040a0">$copy</font> <font color="#2040a0">$_</font>"</font><font color="#4444ff"><strong>)</strong></font>;   <font color="#4444ff"><strong>}</strong></font>   <font color="#4444ff"><strong>}</strong></font></pre>
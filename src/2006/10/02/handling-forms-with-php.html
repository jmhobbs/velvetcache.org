---
category:
- Geek
creator: admin
date: 2006-10-03T01:58:27
layout: layout.njk
tags:
- PHP
- Programming
- Tutorial
title: Handling Forms With PHP
type: post
---
<p>This is a quick tutorial I wrote about, well, form handling with php.  It's not the end-all ultimate guide, it's just an introduction.</p>
<p><em>For this tutorial we'll create a simple login script that will compare values of user input to a preset array to validate the user. Here's the example form we will be using...</em></p>
<!--nextpage-->
<p>Most forms on the internet are submitted using either the <tt>GET</tt> method or the <tt>POST</tt> method.  The most obvious difference between these two methods is that using <tt>GET</tt> you will see the values of the form fields displayed in the address of the page.  For example <tt>login.php?user=UserName&pass=PassWord</tt> would retrieve a page called <tt>login.php</tt> and pass it the variables <tt>user</tt> and <tt>pass</tt> with values <tt>UserName</tt> and <tt>PassWord</tt> respectively.</p>
<p><tt>POST</tt> however works more "beneath the surface" and does all of it's data transmission in a manner completely transparent to the common end user.  Obviously there are advantages to "hiding" this information by using <tt>POST</tt>, but it is important to grasp early on that it is nearly as easy to manipulate <tt>POST</tt> data as <tt>GET</tt> data.  One of the upsides of using <tt>GET</tt> is that a page retrieval using this method can be bookmarked and will likely work, unless the application is written in a way that disallows this.</p>
<p>For this tutorial we'll create a simple login script that will compare values of user input to a preset array to validate the user. Here's the example form we will be using.
<pre lang="html"><!-- form.html -->
<form action="login.php" method="POST">
Username: <input type="text" name="user" /><br/>
Password: <input type="password" name="pass" /><br/>
<input type="submit" value="Log In" />
</form></pre>
This renders in Firefox to look like this:
<img src="http://static.velvetcache.org/pages/2006/10/02/handling-forms-with-php/form.png" alt="Form Render" />
A simple, everyday web form, nothing special there.  Note that we chose the <tt>POST</tt> method to give at least token privacy and prevent users from passing their name and password on the address line.  Again its important to emphasize that allthough the password is entered as asterisks on the browser end, this <u>will</u> be sent in clear text unless the connection is made over SSL (https, not http).
</p>
<!--nextpage-->
<p>Now we need to develop the <tt>login.php</tt> to handle the input from the form.  The first step in this process is learning how to access the values passed by the browser in the <tt>POST</tt>.</p>
<p>PHP 4.1.0 onward has predefined arrays of variables know as "superglobals".  These arrays can be accessed from anywhere in a script or class and contain a large quantity of useful data.  They are:
<ul>
<li><tt>$GLOBALS</tt><li>
<li><tt>$_GET</tt></li>
<li><tt>$_POST</tt></li>
<li><tt>$_SERVER</tt></li>
<li><tt>$_COOKIE</tt></li>
<li><tt>$_FILES</tt></li>
<li><tt>$_ENV</tt></li>
<li><tt>$_SESSION</tt></li>
<li><tt>$_REQUEST</tt></li>
</ul>
The ones we will be using are <tt>$_GET</tt>, <tt>$_POST</tt> and <tt>$_REQUEST</tt>.</p>
<p>As you may imagine the <tt>$_GET</tt> array contains all of the variables and values passed by the <tt>GET</tt> method to the script.  Likewise the <tt>$_POST</tt> array contains all the variables passed by the <tt>POST</tt> method to the script.  <tt>$_REQUEST</tt> is a hybrid, containing all the variables passed by the <tt>GET</tt> method, the <tt>POST</tt> method as well as variables from <tt>$_COOKIE</tt>.</p>
<p>So let's start off by simply printing the data that the user entered in the form.  To do this we'll use the <tt>$_POST</tt> superglobal array.</p>
<pre lang="php"><?php
  // login.php
  print $_POST['user'];
  print "<br/>";
  print $_POST['pass'];
?></pre>
<p>There it is, our first form-processing script.  So if we enter <tt>john</tt> as the user name, and <tt>hobbs</tt> as the password, the script should print that back with a break, like so:<br/>john<br/>hobbs</p>
<p>All right, now we need to check and see if this is a valid user/password combination, and for that we need to set up an associated array of valid combinations in <tt>login.php</tt></p>
<pre lang="php"><?php
  // login.php
  $validUsers = array("peter"=>"pan", "john"=>"smith", "robert"=>"scoble");
  print $_POST['user'];
  print "<br/>";
  print $_POST['pass'];
?></pre>
<!--nextpage-->
<p>Now that we have these valid users and their passwords (a.k.a last names), we can use the <tt><a href="http://us2.php.net/manual/en/function.array-key-exists.php" target="_blank">array_key_exists()</a></tt> function and simple comparators to check if we the submitted information is valid.</p>
<pre lang="php"><?php
  // login.php
  $validUsers = array("peter"=>"pan", "john"=>"smith", "robert"=>"scoble");
  print $_POST['user'];
  if(array_key_exists($_POST['user'], $validUsers))
  {
    $user = $_POST['user'];
    print "<br/>".$validUsers["$user"];
  }
  else
    print "<br/>No matches found.";
?></pre>
<p>If your submitted information matches a username, it prints out the password.  If not it tells you so. Now we are at the point where we can use use the password to make the final decision about whether to admit access or not.  Here's the rest of it.</p>
<pre lang="php"><?php
  // login.php
  $validUsers = array("peter"=>"pan", "john"=>"smith", "robert"=>"scoble");
  if(array_key_exists($_POST['user'], $validUsers))
  {
    $user = $_POST['user'];
    if($validUsers["$user"] == $_POST['pass'])
    {
      print "This is the protected information.";
    }
    else
    {
      print "Sorry, the password you supplied doesn't match up.";
      exit();
    }
  }
  else
  {
    print "The username ".$validUsers["$user"]." was not found.";
    exit();
  }
?></pre>
<p>There you have it, the absolute essentials of form handling and a minor example of password protection.</p>